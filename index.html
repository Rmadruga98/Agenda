<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Agendamento - Barbearia Madruga</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1c1c1c">
  <link rel="icon" href="logo.png">

  <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
<div class="container">

  <div class="logo-wrapper">
    <img src="logo.png" class="logo" alt="Logo da Barbearia Madruga">
  </div>

  <h1>Agendamento Online üíà</h1>

  <button id="btnInstalar" class="btn-instalar">üì≤ Instalar aplicativo</button>

  <h3 class="barber-nome">Barber Madruga</h3>
  <p class="barbeiro-nome">Barbeiro Ricardo</p>

  <!-- üîê VERIFICA√á√ÉO DE TELEFONE -->
  <div id="verificacaoTelefone">
    <label for="telefoneVerificacao">Digite seu WhatsApp para continuar:</label>
    <input id="telefoneVerificacao" placeholder="11999999999" type="tel" pattern="[0-9]{11}" required>
    <button id="btnConfirmarTelefone" type="button">Confirmar n√∫mero</button>
  </div>

  <!-- üìÖ FORMUL√ÅRIO (COME√áA ESCONDIDO) -->
  <form id="formAgendamento" style="display:none;" method="post" action="submit_agendamento.php">
    <label for="nome">Nome:</label>
    <input id="nome" name="nome" required>

    <label for="data">Data:</label>
    <input type="date" id="data" name="data" required min="<?php echo date('Y-m-d'); ?>">

    <label for="horarios">Hor√°rio:</label>
    <div id="horarios" class="horarios"></div>
    <input type="hidden" id="hora" name="hora">

    <label for="servico">Servi√ßo:</label>
    <select id="servico" name="servico" required>
      <option disabled selected>Selecione</option>
      <option>Corte Simples</option>
      <option>Corte Degrad√™</option>
      <option>Corte Navalhado</option>
      <option>Barba</option>
      <option>Corte + Barba</option>
      <option>Sobrancelha</option>
      <option>Pezinho</option>
      <option>Corte + Barba + Sobrancelha</option>
      <option>Pigmenta√ß√£o + Corte</option>
      <option>Luzes + Corte</option>
      <option>Platinado + Corte</option>
    </select>

    <label for="preco">Pre√ßo:</label>
    <input id="preco" name="preco" readonly type="text">

    <button type="submit">Agendar</button>
  </form>

  <!-- üîí ADMIN -->
  <button id="btnAdmin" style="display:none;">üîí √Årea do Administrador</button>

  <div id="areaAdmin" style="display:none;">
    <h2>üìã Agenda Ativa</h2>
    <ul id="listaAgendamentos"></ul>

    <h2>üìö Hist√≥rico</h2>
    <ul id="listaHistorico"></ul>

    <button id="btnLimparHistorico">üßπ Apagar hist√≥rico</button>
    <button id="btnRelatorioDiario">üìä Enviar relat√≥rio do dia</button>
    <button id="btnSairAdmin">‚ùå Sair</button>
  </div>

  <footer class="rodape">
    ¬© 2026 ‚Ä¢ Barber Madruga
  </footer>

</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script src="firebase.js"></script>
<script src="script.js"></script>

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("./service-worker.js");
}

document.getElementById('btnConfirmarTelefone').addEventListener('click', function() {
  const telefone = document.getElementById('telefoneVerificacao').value;
  if (telefone.match(/^\d{11}$/)) {
    document.getElementById('verificacaoTelefone').style.display = 'none';
    document.getElementById('formAgendamento').style.display = 'block';
  } else {
    alert('Por favor, digite um n√∫mero de telefone v√°lido com 11 d√≠gitos.');
  }
});

document.getElementById('servico').addEventListener('change', function() {
  const precos = {
    'Corte Simples': 'R$ 30,00',
    'Corte Degrad√™': 'R$ 35,00',
    'Corte Navalhado': 'R$ 40,00',
    'Barba': 'R$ 20,00',
    'Corte + Barba': 'R$ 55,00',
    'Sobrancelha': 'R$ 10,00',
    'Pezinho': 'R$ 15,00',
    'Corte + Barba + Sobrancelha': 'R$ 60,00',
    'Pigmenta√ß√£o + Corte': 'R$ 60,00',
    'Luzes + Corte': 'R$ 75,00',
    'Platinado + Corte': 'R$ 110,00'
  };
  const servico = this.value;
  document.getElementById('preco').value = precos[servico] || '';
});

document.getElementById('formAgendamento').addEventListener('submit', function(event) {
  event.preventDefault();
  // Here you can add validations before actual submission
  alert("Agendamento enviado!");
  // You can now use AJAX or any other method to send the data if needed
});

document.getElementById('btnLimparHistorico').addEventListener('click', function() {
  // L√≥gica para apagar hist√≥rico
});

document.getElementById('btnRelatorioDiario').addEventListener('click', function() {
  // L√≥gica para enviar relat√≥rio do dia
});

document.getElementById('btnSairAdmin').addEventListener('click', function() {
  // L√≥gica para sair da √°rea do administrador
});
</script>

</body>
</html>